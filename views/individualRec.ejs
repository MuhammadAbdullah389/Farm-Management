<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entry Report</title>
    <link rel="stylesheet" href="/styles/retrieve.css">
</head>
<body>
    <header>
        <h2>Record for <%= username %>!</h2>
        <h4><%= date %></h4>
    </header>

    <nav>
        <ul>
            <li><a href="/">Dashboard</a></li>
            <li>Update a Record</li>
            <li><a href="/contact">Contact the Developer</a></li>
        </ul>
    </nav>

    <h2>Entry Report</h2>

    <h3>Date: <%= entry.date %></h3>

    <h4>Milk Yields</h4>
    <table>
        <tbody>
            <tr>
                <td>Morning Milk Yield</td>
                <td><%= entry.morningMilkQuantity %> liters</td>
            </tr>
            <tr>
                <td>Noon Milk Yield</td>
                <td><%= entry.eveningMilkQuantity %> liters</td>
            </tr>
        </tbody>
    </table>

    <h4>Expenses</h4>
    <table>
        <thead>
            <tr>
                <th>Description</th>
                <th>Amount</th>
            </tr>
        </thead>
        <tbody>
            <% entry.expenses.forEach(expense => { %>
                <tr>
                    <td><%= expense.description %></td>
                    <td><%= expense.amount %> PKR</td>
                </tr>
            <% }) %>
        </tbody>
    </table>

    <!-- Revenue Section (With Table Header) -->
    <h4>Revenue</h4>
    <table>
        <thead>
            <tr>
                <th>Description</th>
                <th>Amount</th>
            </tr>
        </thead>
        <tbody>
            <% entry.revenues.forEach(revenue => { %>
                <tr>
                    <td><%= revenue.description %></td>
                    <td><%= revenue.amount %> PKR</td>
                </tr>
            <% }) %>
        </tbody>
    </table>

    <h4>Additional Information</h4>
    <% 
                    let totalMilk = entry.morningMilkQuantity + entry.eveningMilkQuantity
                    let milkRevenue = totalMilk * 140;
                    let otherRev = entry.totalRevenue - milkRevenue;
    %>
    <table>
        <tbody>
            <tr>
                <td>Total Milk</td>
                <td><%= totalMilk %> liters</td>
            </tr>
            <tr>
                <td>Revenue by Milk</td>
                <td><%= milkRevenue %> PKR</td>
            </tr>
             <tr>
                <td>Other Revenue</td>
                <td><%= otherRev %> PKR</td>
            </tr>
            <tr>
                <td>Total Revenue</td>
                <td><%= entry.totalRevenue %> PKR</td>
            </tr>
            <tr>
                <td>Total Expenses</td>
                <td><%= entry.totalExpenditure %> PKR</td>
            </tr>
            <tr>
                <td>Net Balance</td>
                <td><%= entry.Balance %> PKR</td>
            </tr>
        </tbody>
    </table>

</body>
</html>
